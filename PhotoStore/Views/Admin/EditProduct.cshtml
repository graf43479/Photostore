@model PhotoStore.Models.ProductViewModel

@{
    
    //ViewBag.Title = String.Format("Admin: Редактирование '{0}-{1}.{2}' ", @Model.CategoryName, @Model.ProductID.ToString(), @Model.ImgExt);
    ViewBag.Title = String.Format("Admin: Редактирование 'Image{0}{1}'", @Model.ProductID.ToString(), @Model.ImgExt);
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

@{
    bool readonl = User.IsInRole("SEO");
}

<style>
    form {
        border: none;
        background-color: white;
    }
</style>

<ul class="breadcrumb">
    @{
        <li><a href="@Url.Action("Index", "Admin")">Главная</a> <span class="divider">/</span></li>
        <li class=""><a href="@Url.Action("Products", "Admin")">Товары</a> <span class="divider">/</span></li>
        <li class="active"><a href="@Url.Action("EditProduct", "Admin", new { productId = @Model.ProductID })">@{
            if (Model.ProductID == 0)
            {
                <b>Новый товар</b>
            }
            else
            {
                <b>Редактировать @String.Format("Редактирование 'Image{0}{1}'", @Model.ProductID.ToString(), @Model.ImgExt)</b>
            }
                                                                                                              } </a> <span class="divider">/</span></li>
    }
</ul>

<h2>@{
    if (Model.ProductID == 0)
    {
            <b>Новый товар</b>
    }
    else
    {
            <b>Редактировать @String.Format("Редактирование 'Image{0}{1}'", @Model.ProductID.ToString(), @Model.ImgExt)</b>
    }
    }
    </h2>

<div class="col-lg-12 col-md-12" style="border-bottom: 1px solid #D5D5D5; padding-bottom: 7px;">
    @using (Html.BeginForm("EditProduct", "Admin", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        @Html.ValidationSummary();
        <div class="editor-field"> @Html.HiddenFor(model => model.ProductID)</div>    
        <div class="editor-field"> @Html.HiddenFor(model => model.Sequence)</div>    
           <div class="editor-field"> @Html.HiddenFor(model => model.Path)</div>    
        <div class="editor-field"> @Html.HiddenFor(model => model.ImgExt)</div>    
        

    
        @*<div class="editor-field"> @Html.HiddenFor(model => model.ProductImages)</div>    *@
        <div class="col-lg-12 col-md-12" style="padding: 0; padding-bottom: 5px;">
        
         <div class="form-group" style="padding: 0">
        
              
            </div></div>
        
    
        
        <div class="col-lg-12 col-md-12" style="">
        <div class="form-group" style="">
            <div class="col-lg-1 " style="">@Html.Label("Категория")</div>
            @{
                                 if (readonl)
                                 {
                    <div class="col-lg-3  multi-line" style="">@Html.HiddenFor(x => x.SelectedCategoryID) @Html.TextBoxFor(model => model.Categories.FirstOrDefault(x => x.CategoryID == model.SelectedCategoryID).CategoryName, @readonl ? (object)new { @class = "form-control", @readonly = "readonly" } : (object)new { @class = "form-control" })</div>
                                 }
                                 else
                                 {
              <div class="col-lg-3 multi-line" style="">  @Html.DropDownListFor(model => model.SelectedCategoryID,
new SelectList(Model.Categories, "CategoryID", "CategoryName"), "--Выберите категорию--", @readonl ? (object)new { @class = "form-control", @readonly = "readonly" } : (object)new { @class = "form-control" })</div>
                                 }

            }
                  @if(Model.ProductID != 0)
                                 {
                                             <div class="col-lg-1" style="text-align: right; padding-right: 5px;">@Html.Label("Появление:")</div> 
                                             <div class="col-lg-3 ">@Html.TextBoxFor(model => model.StartDate, @readonl ? (object)new { @class = "form-control", @readonly = "readonly" } : (object)new { @class = "form-control" })</div>
   
                                             <div class="col-lg-1" style="text-align: right; padding-right: 5px;">@Html.Label("Обновление:")</div> 
                                             <div class="col-lg-3" style="">@Html.TextBoxFor(model => model.UpdateDate, new { disabled = "disabled", @class = "form-control" })</div>
                                         
                                 }
            
        </div>
        </div>
        
        
        
        
        <div class="col-lg-12 col-md-12" style="margin: 20px 0">
        <div class="form-group" style="padding: 0">
                <div class="col-lg-1" style="padding: 0">@Html.Label("Показывать?")</div> 
                                        <div class="col-lg-1" style="padding: 0"> @Html.EditorFor(model => model.IsDisplay)</div>  
                                        <div class="col-lg-1 col-lg-offset-2" style="padding: 0; text-align: right; padding-right: 10px;">@Html.Label("На заставку?")</div> 
                                        <div class="col-lg-1" style="padding: 0"> @Html.EditorFor(model => model.IsChoosen)</div>          
                <input type="submit" class="btn btn-warning btn-md col-lg-2  col-lg-offset-4" value="Сохранить"/>
        </div></div>
        
                                 
        
        <div class="form-group">
                <div class="col-lg-10 col-md-10"></div>
        
            <br/>
        </div>
    
    }
</div>

          
            
          
        <script type="text/javascript">
            $(document).ready(function () {
                $('#StartDate, #UpdateDate').datepicker({ firstDay: 1, dateFormat: 'dd.mm.yy' });
                $('.datePicker').datepicker({ firstDay: 1, dateFormat: 'dd.mm.yy' });
                $.datepicker.setDefaults({ dayNamesMin: ['Вс', 'Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб'] });
                $.datepicker.setDefaults({ monthNames: ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'] });
                $("#ui-datepicker-div").hide();

            });
        </script> 

   
    
    <script>
            $(document).ready(function () {
                $("#SelectedCategoryID, #IsActive, #IsDeleted").addClass("form-control");
            });
        </script>
    


@*<script src="@Url.Content("~/Scripts/jquery.cleditor.min.js")" type="text/javascript"></script>
               <link href="@Url.Content("~/Content/jquery.cleditor.css")" rel="stylesheet" type="text/css" />*@
@*<script type="text/javascript">
    $("#Description").cleditor();
</script>*@



<script>
    var p = $("#menu li a[href='/Admin/Products']");
    p.parent().addClass("selected");    
</script>