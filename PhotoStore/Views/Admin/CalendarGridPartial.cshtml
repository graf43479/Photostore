@using MvcContrib.UI.Grid
@model PhotoStore.Models.PagedViewModel<Domain.Entities.Calendar>
           
  @using (Html.BeginForm("DeleteCalendar", "Admin", FormMethod.Post))
{    
    
    <div class="col-lg-12" style="padding: 0; margin: 10px 0 10px 0;">
        <button type="submit" class="btn btn-md btn-danger" style=""><span class="glyphicon glyphicon-remove">&nbsp;</span>Удалить выбранное</button>
    </div>
    
    Html.RenderPartial("Pager", Model.PagedList);
    
    
    @Html.Grid(Model.PagedList).Columns(column =>
    {
        if (User.IsInRole("admin") || (User.IsInRole("ContentManager")))
        {
            column.Custom(a => Html.Raw("<input type='checkbox' class='reqPayment' name='resubmit' value='" + a.CalendarID + "'/>")).Header(o => "<input type=\"checkbox\" id='chkHeader' />")
                  .Encode(false)
                  .Sortable(false)
                  .HeaderAttributes(new Dictionary<string, object> {{"style", "width:20px"}});
        }


        column.For(x => x.CalendarDate.ToShortDateString()).SortColumnName("CalendarDate").Named("Дата").Attributes(x =>
        {
            return new Dictionary<string, object> { { "style", "width: 80px;" } };
        });


        column.For(x => x.CalendarDescription).Named("Описание").Attributes(x =>
        {
            return new Dictionary<string, object> { { "style", "text-align: left; word-wrap: normal;" } };
        }).Sortable(false);



        column.Custom(x => Html.Raw("<a href = " + Url.Action("EditCalendar", "Admin", new { calendarId = x.CalendarID }) + " title='Редактировать'><i class='fa fa-pencil-square-o fa-2x'></i></a>")).Header(o => "<span class='glyphicon glyphicon-edit'> </span>").Encode(false)
                                        .Sortable(false);
        
    }
                  ).Sort(Model.GridSortOptions).Attributes(@class => "table table-striped table-bordered table-hover table-condensed grid-style").Empty("Нет данных")
 
    
    
    Html.RenderPartial("Pager", Model.PagedList);    
    
    <div class="col-lg-12" style="padding: 0; margin: 10px 0 10px 0;">
        <button type="submit" class="btn btn-md btn-danger" style=""><span class="glyphicon glyphicon-remove">&nbsp;</span>Удалить выбранное</button>
        <a style="float: right" class="btn btn-default col-lg-1" href=@Url.Action("Calendar2")><i class="glyphicon glyphicon-calendar"></i></a>
    </div>
    
             

     
     
}

<script type="text/javascript">
    $(document).ready(function () {
        $('#chkHeader').change(function () {
            if ($(this).is(':checked')) {
                $('.reqPayment').attr('checked', 'checked');
            } else {
                $('.reqPayment').removeAttr('checked');
            }
        });
    }); 
</script>


